alias ControlIC d0
alias MinPressDisplay d1
alias MaxPressDisplay d2
alias MinTempDisplay d3
alias MaxTempDisplay d4
alias Furnace d5
alias maxtemp r7
alias mintemp r8
alias maxpress r9
alias minpress r10
alias Show r11
alias data r12
define KELVINOFFSET 273
s MinTempDisplay Color 0    #blue
s MaxTempDisplay Color 4    #red
s MinPressDisplay Color 9    #Khaki
s MaxPressDisplay Color 8    #Brown
Loop:
yield
l r2 ControlIC Setting

sgez Show r2
jal LollaPalooza

bltz r2 Loop
mod maxpress r2 256
div r2 r2 256
trunc r2 r2
mod maxtemp r2 256
div r2 r2 256
trunc r2 r2
mod minpress r2 256
div r2 r2 256
trunc r2 r2
mul maxpress maxpress 500
mul mintemp r2 50
mul minpress minpress 500
mul maxtemp maxtemp 50
brne maxpress 2500 2  #tweak here for electrum
sub maxpress maxpress 100 #2400/500 doesn't divide
l r0 Furnace Pressure
sge r1 r0 minpress
sle r2 r0 maxpress
and r3 r1 r2
select r0 r3 2 9
s MinPressDisplay Color r0
select r0 r3 2 8
s MaxPressDisplay Color r0
l r0 Furnace Temperature
sge r1 r0 mintemp
sle r2 r0 maxtemp
and r3 r1 r2
select r0 r3 2 0
s MinTempDisplay Color r0
select r0 r3 2 4
s MaxTempDisplay Color r0
sub mintemp mintemp KELVINOFFSET
sub maxtemp maxtemp KELVINOFFSET
s MinPressDisplay Setting minpress
s MaxPressDisplay Setting maxpress
s MinTempDisplay Setting mintemp
s MaxTempDisplay Setting maxtemp
j Loop

LollaPalooza:
s MinPressDisplay On Show
s MaxPressDisplay On Show
s MinTempDisplay On Show
s MaxTempDisplay On Show
j ra
